<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=content-type content="text/html; charset=utf-8"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Replaying changes from one git branch onto another | A Place for Poor Examples</title><meta name=description content="Replaying changes from one git branch onto another"><meta name=keywords content="JavaScript, HTML, software, development, blog, examples, derby, cracking, coding, interview, CoffeeScript, node, express, .NET, C#, ASP.NET, Ember, Knockout, Angular, algorithms, analysis, analytics"><meta name=author content="Matt Blair"><meta name=google-site-verification content=pLaNxAD_C5VD6yWlQnX9ScKil_pSvI3lXz-9k4nOyYU><meta name=generator content="DocPad v6.79.4"><meta name=viewport content="width=device-width"><link rel="shortcut icon" href=/images/icons/favicon.ico><link rel=apple-touch-icon-precomposed sizes=144x144 href=/images/icons/apple-touch-icon-144-precomposed.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/images/icons/apple-touch-icon-114-precomposed.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/images/icons/apple-touch-icon-72-precomposed.png><link rel=apple-touch-icon-precomposed href=/images/icons/apple-touch-icon-57-precomposed.png><link rel=stylesheet href=/styles/twitter-bootstrap.css><link rel=stylesheet href=/styles/style.css><link rel=stylesheet href=/styles/mono-blue.css><link href=/atom.xml type=application/atom+xml rel=alternate title=Posts></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/">A Place for Poor Examples</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li typeof=sioc:Page about=/pages/about.html><a href=/pages/about.html property=dc:title>About</a></li><li typeof=sioc:Page about=/pages/posts.html><a href=/pages/posts.html property=dc:title>Posts</a></li><li typeof=sioc:Page about=/pages/hockey-stuff.html><a href=/pages/hockey-stuff.html property=dc:title>Hobbies</a></li></ul></div></div></div><div class=container><section id=content class=content><div class=row><div class=col-lg-9><article id=git-replay-changes class=post><div class=post-content><h1 class=post-title>Replaying changes from one git branch onto another</h1><div class=post-date>Mon Feb 16 2015</div><h2 id=or-rebasing-without-rebasing>Or rebasing without rebasing</h2><p>Where I work, we use git (like everyone else), and we follow this common pattern for development:</p><ol><li>Create a feature branch off of master</li><li>Work on your feature in the branch</li><li>When getting ready to submit a Pull Request, squash your commits</li><li>Rebase master against your branch</li><li>Open PR</li><li>Get feedback</li><li>After feedback corrected (if present), merge branch into master</li></ol><p>Pretty standard practice. 99% of the time, this is a frictionless process.</p><p>The other day I picked up a story which, while small in scope, touched a ton of files.</p><h3 id=the-path-to-failure>The path to failure</h3><p>I created a branch, did the work, but never squashed my commits - I basically skipped step 3 - and tried to rebase master against my branch. I got the common enemy of every PR - merge conflicts.</p><h3 id=compounding-failure>Compounding failure</h3><p>I had 5+ commits in the branch. The idea of wading through multiple failing rebase steps left me queasy, so I abandoned the rebase and went to merge master.</p><p>So to add to my failure at step 3, now I had skipped step 4 as well.</p><p>After getting the code working I pushed my PR. I received some minor feedback, updated my code, and went to merge master again. More merge conflicts.</p><p>I fixed those conflicts, but now I had a convoluted history of un-squashed commits and two merges. This was both out of practice and felt sloppy.</p><h3 id=finding-a-solution>Finding a solution</h3><p>When you have a messed up git history, you normally do a <code>git rebase --interactive</code>, fix your commit history, and move on.</p><p>But with the merges scattered between commits, an interactive rebase would be difficult.</p><p>It also won&#39;t give you what you want - a single commit.</p><h3 id=the-solution>The solution</h3><p>Enter <a href=https://git-scm.com/docs/git-symbolic-ref>git symbolic-ref</a>.</p><p>This command, while well documented, doesn&#39;t give away the true beauty of this command.</p><p>Hiding on this line is the heart of the command:</p><blockquote><p>Given two arguments, creates or updates a symbolic ref <code>&lt;name&gt;</code> to point at the given branch<ref>.</ref></p></blockquote><p>What does this do? Let&#39;s say you&#39;re working on a sloppy branch. You want to carry over those changes onto another branch (like master), without changing the history of the that branch.</p><p><code>git symbolic-ref HEAD refs/heads/master</code> sets the state of the current branch onto master. You haven&#39;t changed the history - git modifies the files on master to match the state of your branch. The commit history doesn&#39;t change. What this means is that doing something like this:</p><pre class=highlight><code class="hljs smali">git checkout super-sloppy-work-branch
//this causes you to 'checkout' master, but with your current file changes from the sloppy branch
git symbolic-ref HEAD refs/heads/master
git checkout -b<span class=hljs-built_in> new-branch-that-is-great
</span>git<span class=hljs-built_in> add </span>-A
git commit -m 'I totally did this work in one pass'
</code></pre><p>Will give you a one-commit branch with all the work you did in the sloppy branch, but against the latest version of master. Pretty cool!</p></div></article><footer><div id=disqus_thread></div><script type=text/javascript>
        var disqus_shortname = 'codetype';
        var disqus_identifier = 'git-replay-changes';
        var disqus_title = 'Replaying changes from one git branch onto another';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></footer></div><div class="col-lg-3 hidden-xs hidden-sm"><nav class=link-list><h3>Recent Posts</h3><div class=recent-post><a class=title href=/posts/20180115-manager-conference-links.html>Manager Conference Links</a></div><div class=recent-post><a class=title href=/posts/20181121-elasticsearch-perf-work.html>ElasticSearch Perf - Highlighter Edition</a></div><div class=recent-post><a class=title href=/posts/20180908-moment-js-alternatives.html>Moment.js alternatives</a></div><div class=recent-post><a class=title href=/posts/20180601-manager-readme.html>Manager READMEs</a></div><div class=recent-post><a class=title href=/posts/20180305-elasticsearch-sharding-work.html>ElasticSearch sharding work</a></div><div class=recent-post><a class=title href=/posts/20171229-engineering-management-classes.html>Engineering Management Classes</a></div></nav></div></div></section></div><script defer src=//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script defer src=//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js></script><script defer src=/vendor/twitter-bootstrap/dist/js/bootstrap.min.js></script><script defer src=/scripts/script.js></script><script defer src=/scripts/analytics.js></script></body></html>